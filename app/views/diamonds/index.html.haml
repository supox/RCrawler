%h1 Search diamonds price

%p
  = link_to 'Download excel price list', price_path 

= semantic_form_for(@search, url:diamonds_path,as: :search, html:{id:'diamonds_search', :onsubmit=>'return updateSearch();'}, method:'get') do |f|
  - ranges = Diamond.ranges
  .row
    - ranges.each do |key, value|
      .span3
        = f.input key, as: :select, collection: options_for_select(value.push('All'),'All'), :include_blank => false, :input_html =>{onchange: "javascript: updateSearch();"}
    .span3
      =f.input :sort_by, as: :select, collection: ranges.keys.collect{|k|k.to_s.titleize}, include_blank: false, :input_html => {onchange: "javascript: updateSearch();"}
  = f.action :submit, label:'Search', :button_html => {:class => "btn btn-primary"}

  = image_tag 'loading.gif', id:'loadingBar', style:'display:none;'
  %div#diamonds
    = render 'diamonds'

